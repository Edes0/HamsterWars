@inject IHamsterData _db
@inject IBattleData _bd

@if (winnerHamster is null && loserHamster is null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div class="displayed">
        <div class="absoluteResultLeft">
        <h5>@winnerHamster.Name won </h5>
        <img src="/Images/@winnerHamster.ImageName" align="bottom" style="width:300px;height:200px;">
        </div>
        <div class="absoluteResultRight">
        <h5>@loserHamster.Name lost</h5>
        <img src="/Images/@loserHamster.ImageName" align="bottom" style="width:300px;height:200px;">
        </div>
    </div>
}

@code {
    private List<HamsterModel>? hamsters;
    private List<BattleModel>? battles;
    private HamsterModel? winnerHamster;
    private HamsterModel? loserHamster;


    protected override async Task OnInitializedAsync()
    {
        hamsters = await _db.GetHamsters();
        battles = await _bd.GetBattles();

        var winner = hamsters.Where(h => h.ID == battles.Last().Winner_ID);
        var loser = hamsters.Where(h => h.ID == battles.Last().Loser_ID);

        winnerHamster = winner.First();
        loserHamster = loser.First();
    }
}
